!function(){function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},r={},a=n.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in r){var n=r[e];delete r[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,n){r[e]=n},n.parcelRequired7c6=a);var i=a("8nrFW"),l=a("jR9u2"),o=a("gzPrx"),c=a("2XNBT");function u(e,n,t){document.querySelector('[data-id = "'.concat(e,'"]')).addEventListener("click",(function(e){"A"===e.target.nodeName&&(0,c.addNewsToLocalStorage)(n,t)}))}var d=a("aDOrX"),s=a("kN5pd"),_=(s=a("kN5pd"),a("aKAgX")),A=(_=a("aKAgX"),document.querySelector(".default-picture")),E=document.querySelector(".news__box"),L=[];function O(){document.querySelectorAll(".markup-unit__add-favorite").forEach((function(n){n.innerHTML='<p class="markup-unit__favorite-text">Remove from favorite</p>\n                    <svg class="markup-unit__favorite-icon markup-unit__favorite-icon--active" width="16" height="16" viewBox="0 0 32 32">\n                  <path d="M9.334 4c-3.682 0-6.668 2.954-6.668 6.6 0 2.942 1.168 9.926 12.652 16.986 0.194 0.12 0.43 0.191 0.682 0.191s0.488-0.071 0.688-0.194l-0.006 0.003c11.484-7.060 12.652-14.044 12.652-16.986 0-3.646-2.986-6.6-6.668-6.6-3.68 0-6.666 4-6.666 4s-2.986-4-6.666-4z"></path>\n</svg>',n.addEventListener("click",(function(t){var r=localStorage.getItem(s.LOCAL_STORAGE_POPULAR_FAVOURITE_KEY),a=localStorage.getItem(_.LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY);if(r&&!a){var l=(L=e(i)(JSON.parse(r))).findIndex((function(e){return e.title===n.nextElementSibling.innerHTML}));if(-1===l)return;if(L.splice(l,1),0!==L.length)return localStorage.setItem(s.LOCAL_STORAGE_POPULAR_FAVOURITE_KEY,JSON.stringify(L)),E.innerHTML="",f(),O();localStorage.removeItem(s.LOCAL_STORAGE_POPULAR_FAVOURITE_KEY),E.innerHTML="",A.classList.remove("visually-hidden")}else if(a&&!r){var o=(L=e(i)(JSON.parse(a))).findIndex((function(e){return e.headline.main===n.nextElementSibling.innerHTML}));if(-1===o)return;if(L.splice(o,1),0!==L.length)return localStorage.setItem(_.LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY,JSON.stringify(L)),E.innerHTML="",f(),O();localStorage.removeItem(_.LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY),E.innerHTML="",A.classList.remove("visually-hidden")}else if(r&&a){L=e(i)(JSON.parse(r));var c=e(i)(JSON.parse(a)),u=L.findIndex((function(e){return e.title===n.nextElementSibling.innerHTML}));if(-1===u){var d=c.findIndex((function(e){return e.headline.main===n.nextElementSibling.innerHTML}));return c.splice(d,1),0===c.length?(localStorage.removeItem(_.LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY),E.innerHTML="",A.classList.remove("visually-hidden"),f(),O()):(localStorage.setItem(_.LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY,JSON.stringify(c)),E.innerHTML="",f(),O())}return L.splice(u,1),0===L.length?(localStorage.removeItem(s.LOCAL_STORAGE_POPULAR_FAVOURITE_KEY),E.innerHTML="",A.classList.remove("visually-hidden"),f(),O()):(localStorage.setItem(s.LOCAL_STORAGE_POPULAR_FAVOURITE_KEY,JSON.stringify(L)),E.innerHTML="",f(),O())}}))}))}function f(){var n=localStorage.getItem(s.LOCAL_STORAGE_POPULAR_FAVOURITE_KEY),t=localStorage.getItem(_.LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY);null!==n||null!==t?(n&&(L=e(i)(JSON.parse(n))).map((function(n,t){var r=e(l)(n.published_date).format("YY/MM/YYYY"),a="".concat(t);(0,o.createPopularCardMarkup)(n,r,a,E,"beforeend"),u(a,n,s.LOCAL_STORAGE_POPULAR_READ_KEY),A.classList.add("visually-hidden")})),t&&e(i)(JSON.parse(t)).map((function(n,t){var r=e(l)(n.pub_date).format("YY/MM/YYYY"),a="./images/desktop-no-news-601.png";n.multimedia.length>0&&(a="http://www.nytimes.com/".concat(n.multimedia[0].url));var i="".concat(t);(0,d.createSeachCardMarkup)(n,r,i,a,E,"beforeend"),u(i,n,_.LOCAL_STORAGE_INPUT_SEARCH_READ_KEY)}))):A.classList.remove("visually-hidden")}f(),O();var m=document.querySelector(".search-button svg"),S=document.querySelector(".search-input");function T(){var n=localStorage.getItem(s.LOCAL_STORAGE_POPULAR_FAVOURITE_KEY),t=localStorage.getItem(_.LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY),r=[],a=[];if(null!==n||null!==t){if(n&&(L=e(i)(JSON.parse(n))).map((function(e){e.abstract.includes(S.value)&&r.push(e)})),t&&e(i)(JSON.parse(t)).map((function(e){e.abstract.includes(S.value)&&a.push(e)})),!(r.length>0||a.length>0))return E.innerHTML="",void A.classList.remove("visually-hidden");E.innerHTML="",a.length>0&&a.map((function(n,t){var r=e(l)(n.pub_date).format("YY/MM/YYYY"),a="./images/desktop-no-news-601.png";n.multimedia.length>0&&(a="http://www.nytimes.com/".concat(n.multimedia[0].url));var i="".concat(t);(0,d.createSeachCardMarkup)(n,r,i,a,E,"beforeend"),u(i,n,_.LOCAL_STORAGE_INPUT_SEARCH_READ_KEY)})),r.length>0&&r.map((function(n,t){var r=e(l)(n.published_date).format("YY/MM/YYYY"),a="".concat(t);(0,o.createPopularCardMarkup)(n,r,a,E,"beforeend"),u(a,n,s.LOCAL_STORAGE_POPULAR_READ_KEY),A.classList.add("visually-hidden")})),S.value=""}else A.classList.remove("visually-hidden")}m.addEventListener("click",T),document.addEventListener("keydown",(function(e){"Enter"===e.code&&(T(),O())}))}();
//# sourceMappingURL=favorite.24029087.js.map
