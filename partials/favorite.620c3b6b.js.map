{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,6FAUMC,G,aAAUC,SAASC,cAAc,qBACjCC,EAAeF,SAASC,cAAc,cAExCE,EAAqB,GA2EzB,SAASC,IACP,IAAMC,EAAcC,aAAaC,QAAQC,EAAAC,qCACnCC,EAAcJ,aAAaC,QAC/BI,EAAAC,0CAGkB,OAAhBP,GAAwC,OAAhBK,GAKxBL,IACFF,EAAsBU,EAAAhB,EAAA,CAAGiB,KAAKC,MAAMV,KACjBW,KAAI,SAACC,EAAMC,GAC5B,IAAMC,EAAgBN,EAAAO,EAAA,CAAOH,EAAKI,gBAAgBC,OAAO,cACnDC,EAAa,GAASC,OAANN,IAEtB,EAAAO,EAAAC,yBACET,EACAE,EACAI,EACArB,EACA,cAGF,EAAAyB,EAAAC,aACEL,EACAN,EACAT,EAAAqB,+BACArB,EAAAC,qCAGFV,EAAQ+B,UAAUC,IAAI,kB,IAGtBrB,GACkBG,EAAAhB,EAAA,CAAGiB,KAAKC,MAAML,IACjBM,KAAI,SAACC,EAAMC,GAC1B,IAAMC,EAAgBN,EAAAO,EAAA,CAAOH,EAAKe,UAAUV,OAAO,cAC/CW,EAAS,mCACThB,EAAKiB,WAAWC,OAAS,IAC3BF,EAAS,0BAAiDT,OAAvBP,EAAKiB,WAAW,GAAGE,MAExD,IAAMb,EAAa,GAASC,OAANN,IACtB,EAAAmB,EAAAC,uBACErB,EACAE,EACAI,EACAU,EACA/B,EACA,cAEF,EAAAyB,EAAAC,aACEL,EACAN,EACAN,EAAA4B,oCACA5B,EAAAC,yC,KAjDJb,EAAQ+B,UAAUU,OAAO,kB,CA/E7BpC,IAGA,SAASqC,IACPzC,SAAS0C,iBAAiB,8BAA8BC,SAAQ,SAAAC,GAC9DA,EAAGC,UAAa,yfAIhBD,EAAGE,iBAAiB,SAAS,SAAAC,GAC3B,IAAM1C,EAAcC,aAAaC,QAC/BC,EAAAC,qCAEIC,EAAcJ,aAAaC,QAC/BI,EAAAC,0CAGF,GAAIP,EAAa,CAGf,IAAMa,GAFNf,EAAsBU,EAAAhB,EAAA,CAAGiB,KAAKC,MAAMV,KAEH2C,WAC/B,SAAAC,G,OAAWA,EAAQC,QAAUN,EAAGO,mBAAmBN,S,IAGrD,IAAc,IAAV3B,EACF,OAGA,GADAf,EAAmBiD,OAAOlC,EAAO,GACC,IAA9Bf,EAAmBgC,OAWrB,OANA7B,aAAa+C,QACX7C,EAAAC,oCACAK,KAAKwC,UAAUnD,IAEjBD,EAAa2C,UAAY,GACzBzC,IACOqC,IAVPnC,aAAaiD,WAAW/C,EAAAC,qCACxBP,EAAa2C,UAAY,GACzB9C,EAAQ+B,UAAUU,OAAO,kB,MAWxB,GAAI9B,EAAa,CAGtB,IAAM8C,GAFNrD,EAAsBU,EAAAhB,EAAA,CAAGiB,KAAKC,MAAML,KAEHsC,WAC/B,SAAAC,G,OAAWA,EAAQQ,SAASC,OAASd,EAAGO,mBAAmBN,S,IAG7D,IAAc,IAAVW,EACF,OAGA,GADArD,EAAmBiD,OAAOI,EAAO,GACC,IAA9BrD,EAAmBgC,OAWrB,OANA7B,aAAa+C,QACX1C,EAAAC,yCACAE,KAAKwC,UAAUnD,IAEjBD,EAAa2C,UAAY,GACzBzC,IACOqC,IAVPnC,aAAaiD,WAAW5C,EAAAC,0CACxBV,EAAa2C,UAAY,GACzB9C,EAAQ+B,UAAUU,OAAO,kB,QAvDrCC,E","sources":["src/js/favoritePage.js"],"sourcesContent":["import moment from 'moment';\n\nimport { createPopularCardMarkup } from './createPopularCardMarkup';\nimport { onCardClick } from './onCardClick';\nimport { createSeachCardMarkup } from './createSeachCardMarkup';\nimport { LOCAL_STORAGE_POPULAR_FAVOURITE_KEY } from './createHomePageNews';\nimport { LOCAL_STORAGE_POPULAR_READ_KEY } from './createHomePageNews';\nimport { LOCAL_STORAGE_INPUT_SEARCH_READ_KEY } from './createHomePageSeachingNews';\nimport { LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY } from './createHomePageSeachingNews';\n\nconst picture = document.querySelector('.default-picture');\nconst homePageNews = document.querySelector('.news__box');\n\nlet parsedPopularArray = [];\nlet parsedSeachArray = [];\n\ncreateFavoritePageMarkup();\ntest();\n\nfunction test() {\n  document.querySelectorAll('.markup-unit__add-favorite').forEach(el => {\n    el.innerHTML = `<p class=\"markup-unit__favorite-text\">Remove from favorite</p>\n                    <svg class=\"markup-unit__favorite-icon markup-unit__favorite-icon--active\" width=\"16\" height=\"16\" viewBox=\"0 0 32 32\">\n                  <path d=\"M9.334 4c-3.682 0-6.668 2.954-6.668 6.6 0 2.942 1.168 9.926 12.652 16.986 0.194 0.12 0.43 0.191 0.682 0.191s0.488-0.071 0.688-0.194l-0.006 0.003c11.484-7.060 12.652-14.044 12.652-16.986 0-3.646-2.986-6.6-6.668-6.6-3.68 0-6.666 4-6.666 4s-2.986-4-6.666-4z\"></path>\n</svg>`;\n    el.addEventListener('click', e => {\n      const popularData = localStorage.getItem(\n        LOCAL_STORAGE_POPULAR_FAVOURITE_KEY\n      );\n      const inputSearch = localStorage.getItem(\n        LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY\n      );\n\n      if (popularData) {\n        parsedPopularArray = [...JSON.parse(popularData)];\n\n        const index = parsedPopularArray.findIndex(\n          element => element.title === el.nextElementSibling.innerHTML\n        );\n\n        if (index === -1) {\n          return;\n        } else {\n          parsedPopularArray.splice(index, 1);\n          if (parsedPopularArray.length === 0) {\n            localStorage.removeItem(LOCAL_STORAGE_POPULAR_FAVOURITE_KEY);\n            homePageNews.innerHTML = '';\n            picture.classList.remove('visually-hidden');\n          } else {\n            localStorage.setItem(\n              LOCAL_STORAGE_POPULAR_FAVOURITE_KEY,\n              JSON.stringify(parsedPopularArray)\n            );\n            homePageNews.innerHTML = '';\n            createFavoritePageMarkup();\n            return test();\n          }\n        }\n      } else if (inputSearch) {\n        parsedPopularArray = [...JSON.parse(inputSearch)];\n\n        const index = parsedPopularArray.findIndex(\n          element => element.headline.main === el.nextElementSibling.innerHTML\n        );\n\n        if (index === -1) {\n          return;\n        } else {\n          parsedPopularArray.splice(index, 1);\n          if (parsedPopularArray.length === 0) {\n            localStorage.removeItem(LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY);\n            homePageNews.innerHTML = '';\n            picture.classList.remove('visually-hidden');\n          } else {\n            localStorage.setItem(\n              LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY,\n              JSON.stringify(parsedPopularArray)\n            );\n            homePageNews.innerHTML = '';\n            createFavoritePageMarkup();\n            return test();\n          }\n        }\n      }\n    });\n  });\n}\n\nfunction createFavoritePageMarkup() {\n  const popularData = localStorage.getItem(LOCAL_STORAGE_POPULAR_FAVOURITE_KEY);\n  const inputSearch = localStorage.getItem(\n    LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY\n  );\n\n  if (popularData === null && inputSearch === null) {\n    picture.classList.remove('visually-hidden');\n    return;\n  }\n\n  if (popularData) {\n    parsedPopularArray = [...JSON.parse(popularData)];\n    parsedPopularArray.map((news, index) => {\n      const publishedDate = moment(news.published_date).format('YY/MM/YYYY');\n      const readMoreId = `${index}`;\n\n      createPopularCardMarkup(\n        news,\n        publishedDate,\n        readMoreId,\n        homePageNews,\n        'beforeend'\n      );\n\n      onCardClick(\n        readMoreId,\n        news,\n        LOCAL_STORAGE_POPULAR_READ_KEY,\n        LOCAL_STORAGE_POPULAR_FAVOURITE_KEY\n      );\n\n      picture.classList.add('visually-hidden');\n    });\n  }\n  if (inputSearch) {\n    parsedSeachArray = [...JSON.parse(inputSearch)];\n    parsedSeachArray.map((news, index) => {\n      const publishedDate = moment(news.pub_date).format('YY/MM/YYYY');\n      let imgUrl = './images/desktop-no-news-601.png';\n      if (news.multimedia.length > 0) {\n        imgUrl = `http://www.nytimes.com/${news.multimedia[0].url}`;\n      }\n      const readMoreId = `${index}`;\n      createSeachCardMarkup(\n        news,\n        publishedDate,\n        readMoreId,\n        imgUrl,\n        homePageNews,\n        'beforeend'\n      );\n      onCardClick(\n        readMoreId,\n        news,\n        LOCAL_STORAGE_INPUT_SEARCH_READ_KEY,\n        LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY\n      );\n    });\n  }\n}\n"],"names":["$8nrFW","parcelRequire","$28cb32b6a4cb5631$var$picture","document","querySelector","$28cb32b6a4cb5631$var$homePageNews","$28cb32b6a4cb5631$var$parsedPopularArray","$28cb32b6a4cb5631$var$createFavoritePageMarkup","popularData","localStorage","getItem","$kN5pd","LOCAL_STORAGE_POPULAR_FAVOURITE_KEY","inputSearch","$aKAgX","LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY","$parcel$interopDefault","JSON","parse","map","news","index","publishedDate","$jR9u2","published_date","format","readMoreId","concat","$gzPrx","createPopularCardMarkup","$iLqhe","onCardClick","LOCAL_STORAGE_POPULAR_READ_KEY","classList","add","pub_date","imgUrl","multimedia","length","url","$aDOrX","createSeachCardMarkup","LOCAL_STORAGE_INPUT_SEARCH_READ_KEY","remove","$28cb32b6a4cb5631$var$test","querySelectorAll","forEach","el","innerHTML","addEventListener","e","findIndex","element","title","nextElementSibling","splice","setItem","stringify","removeItem","index1","headline","main"],"version":3,"file":"favorite.620c3b6b.js.map"}