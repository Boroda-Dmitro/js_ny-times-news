!function(){function e(e){return e&&e.__esModule?e.default:e}var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},r={},n=a.parcelRequired7c6;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in r){var a=r[e];delete r[e];var n={id:e,exports:{}};return t[e]=n,a.call(n.exports,n,n.exports),n.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,a){r[e]=a},a.parcelRequired7c6=n),n("iE7OH").register(JSON.parse('{"3PGjW":"favorite.33512667.js","bLbsu":"image.a1e54c9b.png","1tUMT":"read.37089969.js"}'));var o=n("8nrFW"),i=n("jR9u2"),l=n("gzPrx"),d=n("2XNBT");function c(e,a,t){document.querySelector('[data-id = "'.concat(e,'"]')).addEventListener("click",(function(e){"A"===e.target.nodeName&&(0,d.addNewsToLocalStorage)(a,t)}))}var s=n("aDOrX"),u=n("kN5pd"),_=n("aKAgX");u=n("kN5pd");function m(){document.querySelectorAll(".markup-unit__section").forEach((function(e){""===e.textContent&&(e.style.display="none")})),document.querySelectorAll(".markup-unit__add-favorite").forEach((function(e){e.addEventListener("click",(function(a){var t=JSON.parse(localStorage.getItem(u.LOCAL_STORAGE_POPULAR_FAVOURITE_KEY)),r=JSON.parse(localStorage.getItem(_.LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY));if(t&&!r){var n=t.filter((function(a){return a.title!==e.nextElementSibling.innerHTML}));if(0!==n.length)return localStorage.setItem(u.LOCAL_STORAGE_POPULAR_FAVOURITE_KEY,JSON.stringify(n)),u.homePageNews.innerHTML="",f(),m();localStorage.removeItem(u.LOCAL_STORAGE_POPULAR_FAVOURITE_KEY),u.homePageNews.innerHTML="",O.classList.remove("visually-hidden")}else if(r&&!t){var o=r.filter((function(a){return a.headline.main!==e.nextElementSibling.innerHTML}));if(0!==o.length)return localStorage.setItem(_.LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY,JSON.stringify(o)),u.homePageNews.innerHTML="",f(),m();localStorage.removeItem(_.LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY),u.homePageNews.innerHTML="",O.classList.remove("visually-hidden")}else if(t&&r){var i=t.findIndex((function(a){return a.title===e.nextElementSibling.innerHTML}));if(-1===i){var l=r.filter((function(a){return a.headline.main!==e.nextElementSibling.innerHTML}));return 0===r.length?(localStorage.removeItem(_.LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY),u.homePageNews.innerHTML="",O.classList.remove("visually-hidden"),f(),m()):(localStorage.setItem(_.LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY,JSON.stringify(l)),u.homePageNews.innerHTML="",f(),m())}return t.splice(i,1),0===t.length?(localStorage.removeItem(u.LOCAL_STORAGE_POPULAR_FAVOURITE_KEY),u.homePageNews.innerHTML="",O.classList.remove("visually-hidden"),f(),m()):(localStorage.setItem(u.LOCAL_STORAGE_POPULAR_FAVOURITE_KEY,JSON.stringify(t)),u.homePageNews.innerHTML="",f(),m())}}))}))}u=n("kN5pd"),u=n("kN5pd"),_=n("aKAgX"),_=n("aKAgX");var A,L=n("jr2sW"),g=n("jq5xJ"),E=n("9PmTJ"),S=n("kCqBr");u=n("kN5pd");A=n("aNJCr").getBundleURL("3PGjW")+"../"+n("iE7OH").resolve("bLbsu");var O=document.querySelector(".default-picture");function f(){var a=localStorage.getItem(u.LOCAL_STORAGE_POPULAR_FAVOURITE_KEY),t=localStorage.getItem(_.LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY);null!==a||null!==t?(a&&(parsedPopularArray=e(o)(JSON.parse(a)),parsedPopularArray.map((function(a,t){var r=e(i)(a.published_date).format("YY/MM/YYYY"),n="".concat(t),o=e(A),l="No text";0!==a.media.length&&(o="".concat(a.media[0]["media-metadata"][2].url),l="".concat(a.media[0].caption));var d=JSON.parse(localStorage.getItem(u.LOCAL_STORAGE_POPULAR_READ_KEY));d?-1===d.findIndex((function(e){return e.title===a.title}))?(0,L.createLocalStorageWithFavouriteKeyPopularCardMarkup)(a,r,n,u.homePageNews,"beforeend",o,l):(0,E.createLocalStorageWithReadAndFavouriteKeyPopularCardMarkup)(a,r,n,u.homePageNews,"beforeend",o,l):(0,L.createLocalStorageWithFavouriteKeyPopularCardMarkup)(a,r,n,u.homePageNews,"beforeend",o,l);c(n,a,u.LOCAL_STORAGE_POPULAR_READ_KEY),O.classList.add("visually-hidden")}))),t&&(parsedSeachArray=e(o)(JSON.parse(t)),parsedSeachArray.map((function(a,t){var r=e(i)(a.pub_date).format("YY/MM/YYYY"),n="./images/desktop-no-news-601.png";a.multimedia.length>0&&(n="http://www.nytimes.com/".concat(a.multimedia[0].url));var o="".concat(t),l=JSON.parse(localStorage.getItem(_.LOCAL_STORAGE_INPUT_SEARCH_READ_KEY));l?-1===l.findIndex((function(e){return e.headline.main===a.headline.main}))?(0,g.createLocalStorageWithFavouriteKeySearchCardMarkup)(a,r,o,n,u.homePageNews,"beforeend"):(0,S.createLocalStorageWithReadAndFavouriteKeySearchCardMarkup)(a,r,o,n,u.homePageNews,"beforeend"):(0,g.createLocalStorageWithFavouriteKeySearchCardMarkup)(a,r,o,n,u.homePageNews,"beforeend");c(o,a,_.LOCAL_STORAGE_INPUT_SEARCH_READ_KEY),O.classList.add("visually-hidden")})))):O.classList.remove("visually-hidden")}f(),m();var p=document.querySelector(".search-button svg"),h=document.querySelector(".search-input");function R(){var a=localStorage.getItem(u.LOCAL_STORAGE_POPULAR_FAVOURITE_KEY),t=localStorage.getItem(_.LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY),r=[],n=[];if(null!==a||null!==t){if(a&&(parsedPopularArray=e(o)(JSON.parse(a)),parsedPopularArray.map((function(e){e.abstract.includes(h.value)&&r.push(e)}))),t&&(parsedSeachArray=e(o)(JSON.parse(t)),parsedSeachArray.map((function(e){e.abstract.includes(h.value)&&n.push(e)}))),!(r.length>0||n.length>0))return u.homePageNews.innerHTML="",void O.classList.remove("visually-hidden");u.homePageNews.innerHTML="",n.length>0&&n.map((function(a,t){var r=e(i)(a.pub_date).format("YY/MM/YYYY"),n="./images/desktop-no-news-601.png";a.multimedia.length>0&&(n="http://www.nytimes.com/".concat(a.multimedia[0].url));var o="".concat(t);(0,s.createSeachCardMarkup)(a,r,o,n,u.homePageNews,"beforeend"),c(o,a,_.LOCAL_STORAGE_INPUT_SEARCH_READ_KEY)})),r.length>0&&r.map((function(a,t){var r=e(i)(a.published_date).format("YY/MM/YYYY"),n="".concat(t),o=e(A),d="No text";0!==a.media.length&&(o="".concat(a.media[0]["media-metadata"][2].url),d="".concat(a.media[0].caption)),(0,l.createPopularCardMarkup)(a,r,n,u.homePageNews,"beforeend",o,d),c(n,a,u.LOCAL_STORAGE_POPULAR_READ_KEY),O.classList.add("visually-hidden")})),h.value=""}else O.classList.remove("visually-hidden")}p.addEventListener("click",R),document.addEventListener("keydown",(function(e){"Enter"===e.code&&(R(),m())}))}();
//# sourceMappingURL=favorite.33512667.js.map
