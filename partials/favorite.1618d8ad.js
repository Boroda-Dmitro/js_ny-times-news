function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},i=t.parcelRequired7c6;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){a[e]=t},t.parcelRequired7c6=i),i("kyEFX").register(JSON.parse('{"19qTy":"favorite.1618d8ad.js","dN60t":"image.a1e54c9b.png","32wSe":"read.55447ad4.js"}'));var r=i("cxTnx"),l=i("5R7wT"),o=i("4jbo8");function s(e,t,n){document.querySelector(`[data-id = "${e}"]`).addEventListener("click",(e=>{"A"===e.target.nodeName&&(0,o.addNewsToLocalStorage)(t,n)}))}var d,c=i("jErh6"),_=i("atV3q"),u=(_=i("atV3q"),i("bfbNR"));u=i("bfbNR");d=new URL("../"+i("kyEFX").resolve("dN60t"),import.meta.url).toString();const m=document.querySelector(".default-picture"),E=document.querySelector(".news__box");let A=[],L=[];function O(){document.querySelectorAll(".markup-unit__add-favorite").forEach((e=>{e.innerHTML='<p class="markup-unit__favorite-text">Remove from favorite</p>\n                    <svg class="markup-unit__favorite-icon markup-unit__favorite-icon--active" width="16" height="16" viewBox="0 0 32 32">\n                  <path d="M9.334 4c-3.682 0-6.668 2.954-6.668 6.6 0 2.942 1.168 9.926 12.652 16.986 0.194 0.12 0.43 0.191 0.682 0.191s0.488-0.071 0.688-0.194l-0.006 0.003c11.484-7.060 12.652-14.044 12.652-16.986 0-3.646-2.986-6.6-6.668-6.6-3.68 0-6.666 4-6.666 4s-2.986-4-6.666-4z"></path>\n</svg>',e.addEventListener("click",(t=>{const n=localStorage.getItem(_.LOCAL_STORAGE_POPULAR_FAVOURITE_KEY),a=localStorage.getItem(u.LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY);if(n&&!a){A=[...JSON.parse(n)];const t=A.findIndex((t=>t.title===e.nextElementSibling.innerHTML));if(-1===t)return;if(A.splice(t,1),0!==A.length)return localStorage.setItem(_.LOCAL_STORAGE_POPULAR_FAVOURITE_KEY,JSON.stringify(A)),E.innerHTML="",S(),O();localStorage.removeItem(_.LOCAL_STORAGE_POPULAR_FAVOURITE_KEY),E.innerHTML="",m.classList.remove("visually-hidden")}else if(a&&!n){A=[...JSON.parse(a)];const t=A.findIndex((t=>t.headline.main===e.nextElementSibling.innerHTML));if(-1===t)return;if(A.splice(t,1),0!==A.length)return localStorage.setItem(u.LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY,JSON.stringify(A)),E.innerHTML="",S(),O();localStorage.removeItem(u.LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY),E.innerHTML="",m.classList.remove("visually-hidden")}else if(n&&a){A=[...JSON.parse(n)];let t=[...JSON.parse(a)];const i=A.findIndex((t=>t.title===e.nextElementSibling.innerHTML));if(-1===i){const n=t.findIndex((t=>t.headline.main===e.nextElementSibling.innerHTML));return t.splice(n,1),0===t.length?(localStorage.removeItem(u.LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY),E.innerHTML="",m.classList.remove("visually-hidden"),S(),O()):(localStorage.setItem(u.LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY,JSON.stringify(t)),E.innerHTML="",S(),O())}return A.splice(i,1),0===A.length?(localStorage.removeItem(_.LOCAL_STORAGE_POPULAR_FAVOURITE_KEY),E.innerHTML="",m.classList.remove("visually-hidden"),S(),O()):(localStorage.setItem(_.LOCAL_STORAGE_POPULAR_FAVOURITE_KEY,JSON.stringify(A)),E.innerHTML="",S(),O())}}))}))}function S(){const t=localStorage.getItem(_.LOCAL_STORAGE_POPULAR_FAVOURITE_KEY),n=localStorage.getItem(u.LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY);null!==t||null!==n?(t&&(A=[...JSON.parse(t)],A.map(((t,n)=>{const a=e(r)(t.published_date).format("YY/MM/YYYY"),i=`${n}`;let o=e(d),c="No text";0!==t.media.length&&(o=`${t.media[0]["media-metadata"][2].url}`,c=`${t.media[0].caption}`),(0,l.createPopularCardMarkup)(t,a,i,E,"beforeend",o,c),s(i,t,_.LOCAL_STORAGE_POPULAR_READ_KEY),m.classList.add("visually-hidden")}))),n&&(L=[...JSON.parse(n)],L.map(((t,n)=>{const a=e(r)(t.pub_date).format("YY/MM/YYYY");let i="./images/desktop-no-news-601.png";t.multimedia.length>0&&(i=`http://www.nytimes.com/${t.multimedia[0].url}`);const l=`${n}`;(0,c.createSeachCardMarkup)(t,a,l,i,E,"beforeend"),s(l,t,u.LOCAL_STORAGE_INPUT_SEARCH_READ_KEY),m.classList.add("visually-hidden")})))):m.classList.remove("visually-hidden")}S(),O(),document.querySelectorAll(".markup-unit__section").forEach((e=>{""===e.textContent&&(e.style.display="none")}));const p=document.querySelector(".search-button svg"),R=document.querySelector(".search-input");function T(){const t=localStorage.getItem(_.LOCAL_STORAGE_POPULAR_FAVOURITE_KEY),n=localStorage.getItem(u.LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY),a=[],i=[];if(null!==t||null!==n){if(t&&(A=[...JSON.parse(t)],A.map((e=>{e.abstract.includes(R.value)&&a.push(e)}))),n&&(L=[...JSON.parse(n)],L.map((e=>{e.abstract.includes(R.value)&&i.push(e)}))),!(a.length>0||i.length>0))return E.innerHTML="",void m.classList.remove("visually-hidden");E.innerHTML="",i.length>0&&i.map(((t,n)=>{const a=e(r)(t.pub_date).format("YY/MM/YYYY");let i="./images/desktop-no-news-601.png";t.multimedia.length>0&&(i=`http://www.nytimes.com/${t.multimedia[0].url}`);const l=`${n}`;(0,c.createSeachCardMarkup)(t,a,l,i,E,"beforeend"),s(l,t,u.LOCAL_STORAGE_INPUT_SEARCH_READ_KEY)})),a.length>0&&a.map(((t,n)=>{const a=e(r)(t.published_date).format("YY/MM/YYYY"),i=`${n}`;let o=e(d),c="No text";0!==t.media.length&&(o=`${t.media[0]["media-metadata"][2].url}`,c=`${t.media[0].caption}`),(0,l.createPopularCardMarkup)(t,a,i,E,"beforeend",o,c),s(i,t,_.LOCAL_STORAGE_POPULAR_READ_KEY),m.classList.add("visually-hidden")})),R.value=""}else m.classList.remove("visually-hidden")}p.addEventListener("click",T),document.addEventListener("keydown",(e=>{"Enter"===e.code&&(T(),O())}));
//# sourceMappingURL=favorite.1618d8ad.js.map
