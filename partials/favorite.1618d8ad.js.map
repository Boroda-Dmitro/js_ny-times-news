{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-c43d13c9514975e3.js","src/js/favoritePage.js","src/js/onFavouritePageCardClick.js","node_modules/@parcel/runtime-js/lib/runtime-93d989f1ed594b70.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"19qTy\\\":\\\"favorite.1618d8ad.js\\\",\\\"dN60t\\\":\\\"image.a1e54c9b.png\\\",\\\"32wSe\\\":\\\"read.55447ad4.js\\\"}\"));","import moment from 'moment';\nimport { createPopularCardMarkup } from './createPopularCardMarkup';\nimport { onFavouritePageCardClick } from './onFavouritePageCardClick';\nimport { createSeachCardMarkup } from './createSeachCardMarkup';\nimport { LOCAL_STORAGE_POPULAR_FAVOURITE_KEY } from './createHomePageNews';\nimport { LOCAL_STORAGE_POPULAR_READ_KEY } from './createHomePageNews';\nimport { LOCAL_STORAGE_INPUT_SEARCH_READ_KEY } from './createHomePageSeachingNews';\nimport { LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY } from './createHomePageSeachingNews';\nimport img from '../images/image.png';\n\nconst picture = document.querySelector('.default-picture');\nconst homePageNews = document.querySelector('.news__box');\n\nlet parsedPopularArray = [];\nlet parsedSeachArray = [];\n\ncreateFavoritePageMarkup();\ntest();\n\nfunction test() {\n  document.querySelectorAll('.markup-unit__add-favorite').forEach(el => {\n    el.innerHTML = `<p class=\"markup-unit__favorite-text\">Remove from favorite</p>\n                    <svg class=\"markup-unit__favorite-icon markup-unit__favorite-icon--active\" width=\"16\" height=\"16\" viewBox=\"0 0 32 32\">\n                  <path d=\"M9.334 4c-3.682 0-6.668 2.954-6.668 6.6 0 2.942 1.168 9.926 12.652 16.986 0.194 0.12 0.43 0.191 0.682 0.191s0.488-0.071 0.688-0.194l-0.006 0.003c11.484-7.060 12.652-14.044 12.652-16.986 0-3.646-2.986-6.6-6.668-6.6-3.68 0-6.666 4-6.666 4s-2.986-4-6.666-4z\"></path>\n</svg>`;\n    el.addEventListener('click', e => {\n      const popularData = localStorage.getItem(\n        LOCAL_STORAGE_POPULAR_FAVOURITE_KEY\n      );\n      const inputSearch = localStorage.getItem(\n        LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY\n      );\n\n      if (popularData && !inputSearch) {\n        parsedPopularArray = [...JSON.parse(popularData)];\n\n        const index = parsedPopularArray.findIndex(\n          element => element.title === el.nextElementSibling.innerHTML\n        );\n\n        if (index === -1) {\n          return;\n        } else {\n          parsedPopularArray.splice(index, 1);\n          if (parsedPopularArray.length === 0) {\n            localStorage.removeItem(LOCAL_STORAGE_POPULAR_FAVOURITE_KEY);\n            homePageNews.innerHTML = '';\n            picture.classList.remove('visually-hidden');\n          } else {\n            localStorage.setItem(\n              LOCAL_STORAGE_POPULAR_FAVOURITE_KEY,\n              JSON.stringify(parsedPopularArray)\n            );\n            homePageNews.innerHTML = '';\n            createFavoritePageMarkup();\n            return test();\n          }\n        }\n      } else if (inputSearch && !popularData) {\n        parsedPopularArray = [...JSON.parse(inputSearch)];\n\n        const index = parsedPopularArray.findIndex(\n          element => element.headline.main === el.nextElementSibling.innerHTML\n        );\n\n        if (index === -1) {\n          return;\n        } else {\n          parsedPopularArray.splice(index, 1);\n          if (parsedPopularArray.length === 0) {\n            localStorage.removeItem(LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY);\n            homePageNews.innerHTML = '';\n            picture.classList.remove('visually-hidden');\n          } else {\n            localStorage.setItem(\n              LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY,\n              JSON.stringify(parsedPopularArray)\n            );\n            homePageNews.innerHTML = '';\n            createFavoritePageMarkup();\n            return test();\n          }\n        }\n      } else if (popularData && inputSearch) {\n        parsedPopularArray = [...JSON.parse(popularData)];\n        let parsedArray = [...JSON.parse(inputSearch)];\n        const index = parsedPopularArray.findIndex(\n          element => element.title === el.nextElementSibling.innerHTML\n        );\n\n        if (index === -1) {\n          const index2 = parsedArray.findIndex(\n            element => element.headline.main === el.nextElementSibling.innerHTML\n          );\n          parsedArray.splice(index2, 1);\n          if (parsedArray.length === 0) {\n            localStorage.removeItem(LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY);\n            homePageNews.innerHTML = '';\n            picture.classList.remove('visually-hidden');\n            createFavoritePageMarkup();\n            return test();\n          } else {\n            localStorage.setItem(\n              LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY,\n              JSON.stringify(parsedArray)\n            );\n            homePageNews.innerHTML = '';\n            createFavoritePageMarkup();\n            return test();\n          }\n        } else {\n          parsedPopularArray.splice(index, 1);\n          if (parsedPopularArray.length === 0) {\n            localStorage.removeItem(LOCAL_STORAGE_POPULAR_FAVOURITE_KEY);\n            homePageNews.innerHTML = '';\n            picture.classList.remove('visually-hidden');\n            createFavoritePageMarkup();\n            return test();\n          } else {\n            localStorage.setItem(\n              LOCAL_STORAGE_POPULAR_FAVOURITE_KEY,\n              JSON.stringify(parsedPopularArray)\n            );\n            homePageNews.innerHTML = '';\n            createFavoritePageMarkup();\n            return test();\n          }\n        }\n      }\n    });\n  });\n}\n\nfunction createFavoritePageMarkup() {\n  const popularData = localStorage.getItem(LOCAL_STORAGE_POPULAR_FAVOURITE_KEY);\n  const inputSearch = localStorage.getItem(\n    LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY\n  );\n\n  if (popularData === null && inputSearch === null) {\n    picture.classList.remove('visually-hidden');\n    return;\n  }\n\n  if (popularData) {\n    parsedPopularArray = [...JSON.parse(popularData)];\n    parsedPopularArray.map((news, index) => {\n      const publishedDate = moment(news.published_date).format('YY/MM/YYYY');\n      const readMoreId = `${index}`;\n      let imgUrl = img;\n      let altText = 'No text';\n      if (news.media.length !== 0) {\n        imgUrl = `${news.media[0]['media-metadata'][2].url}`;\n        altText = `${news.media[0].caption}`;\n      }\n\n      createPopularCardMarkup(\n        news,\n        publishedDate,\n        readMoreId,\n        homePageNews,\n        'beforeend',\n        imgUrl,\n        altText\n      );\n\n      onFavouritePageCardClick(\n        readMoreId,\n        news,\n        LOCAL_STORAGE_POPULAR_READ_KEY\n      );\n\n      picture.classList.add('visually-hidden');\n    });\n  }\n  if (inputSearch) {\n    parsedSeachArray = [...JSON.parse(inputSearch)];\n    parsedSeachArray.map((news, index) => {\n      const publishedDate = moment(news.pub_date).format('YY/MM/YYYY');\n      let imgUrl = './images/desktop-no-news-601.png';\n      if (news.multimedia.length > 0) {\n        imgUrl = `http://www.nytimes.com/${news.multimedia[0].url}`;\n      }\n      const readMoreId = `${index}`;\n      createSeachCardMarkup(\n        news,\n        publishedDate,\n        readMoreId,\n        imgUrl,\n        homePageNews,\n        'beforeend'\n      );\n      onFavouritePageCardClick(\n        readMoreId,\n        news,\n        LOCAL_STORAGE_INPUT_SEARCH_READ_KEY\n      );\n      picture.classList.add('visually-hidden');\n    });\n  }\n}\n\ndocument.querySelectorAll('.markup-unit__section').forEach(el => {\n  if (el.textContent === '') {\n    el.style.display = 'none';\n  }\n});\n\nconst searchBtn = document.querySelector('.search-button svg');\nconst input = document.querySelector('.search-input');\n\nsearchBtn.addEventListener('click', searchInFavorite);\n\ndocument.addEventListener('keydown', e => {\n  if (e.code !== 'Enter') {\n    return;\n  }\n  searchInFavorite();\n  test();\n});\n\nfunction searchInFavorite() {\n  const popularData = localStorage.getItem(LOCAL_STORAGE_POPULAR_FAVOURITE_KEY);\n  const inputSearch = localStorage.getItem(\n    LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY\n  );\n  const searchOnPopularArr = [];\n  const searchOnSearchArr = [];\n\n  if (popularData === null && inputSearch === null) {\n    picture.classList.remove('visually-hidden');\n    return;\n  }\n\n  if (popularData) {\n    parsedPopularArray = [...JSON.parse(popularData)];\n    parsedPopularArray.map(news => {\n      if (news.abstract.includes(input.value)) {\n        searchOnPopularArr.push(news);\n      }\n    });\n  }\n\n  if (inputSearch) {\n    parsedSeachArray = [...JSON.parse(inputSearch)];\n    parsedSeachArray.map(news => {\n      if (news.abstract.includes(input.value)) {\n        searchOnSearchArr.push(news);\n      }\n    });\n  }\n\n  if (searchOnPopularArr.length > 0 || searchOnSearchArr.length > 0) {\n    homePageNews.innerHTML = '';\n  } else {\n    homePageNews.innerHTML = '';\n    picture.classList.remove('visually-hidden');\n    return;\n  }\n\n  if (searchOnSearchArr.length > 0) {\n    searchOnSearchArr.map((news, index) => {\n      const publishedDate = moment(news.pub_date).format('YY/MM/YYYY');\n      let imgUrl = './images/desktop-no-news-601.png';\n      if (news.multimedia.length > 0) {\n        imgUrl = `http://www.nytimes.com/${news.multimedia[0].url}`;\n      }\n      const readMoreId = `${index}`;\n      createSeachCardMarkup(\n        news,\n        publishedDate,\n        readMoreId,\n        imgUrl,\n        homePageNews,\n        'beforeend'\n      );\n      onFavouritePageCardClick(\n        readMoreId,\n        news,\n        LOCAL_STORAGE_INPUT_SEARCH_READ_KEY\n      );\n    });\n  }\n\n  if (searchOnPopularArr.length > 0) {\n    searchOnPopularArr.map((news, index) => {\n      const publishedDate = moment(news.published_date).format('YY/MM/YYYY');\n      const readMoreId = `${index}`;\n      let imgUrl = img;\n      let altText = 'No text';\n      if (news.media.length !== 0) {\n        imgUrl = `${news.media[0]['media-metadata'][2].url}`;\n        altText = `${news.media[0].caption}`;\n      }\n\n      createPopularCardMarkup(\n        news,\n        publishedDate,\n        readMoreId,\n        homePageNews,\n        'beforeend',\n        imgUrl,\n        altText\n      );\n\n      onFavouritePageCardClick(\n        readMoreId,\n        news,\n        LOCAL_STORAGE_POPULAR_READ_KEY\n      );\n\n      picture.classList.add('visually-hidden');\n    });\n  }\n\n  input.value = '';\n}\n","import { addNewsToLocalStorage } from './addNewsToLocalStorage';\n\nexport function onFavouritePageCardClick(value, news, key) {\n  document\n    .querySelector(`[data-id = \"${value}\"]`)\n    .addEventListener('click', e => {\n      if (e.target.nodeName === 'A') {\n        addNewsToLocalStorage(news, key);\n      }\n    });\n}\n","module.exports = new __parcel__URL__(\"../\" + require('./helpers/bundle-manifest').resolve(\"dN60t\")).toString();"],"names":["parcelRequire","register","JSON","parse","$cxTnx","$4jbo8","$fcd5fca6060a79c5$export$16aae63b3b9c9e27","value","news","key","document","querySelector","addEventListener","e","target","nodeName","addNewsToLocalStorage","$d0da05ff9f2b7444$exports","URL","resolve","import","meta","url","toString","$36e4052ebf5ea19e$var$picture","$36e4052ebf5ea19e$var$homePageNews","$36e4052ebf5ea19e$var$parsedPopularArray","$36e4052ebf5ea19e$var$parsedSeachArray","$36e4052ebf5ea19e$var$test","querySelectorAll","forEach","el","innerHTML","popularData","localStorage","getItem","$atV3q","LOCAL_STORAGE_POPULAR_FAVOURITE_KEY","inputSearch","$bfbNR","LOCAL_STORAGE_INPUT_SEARCH_FAVOURITE_KEY","index","findIndex","element","title","nextElementSibling","splice","length","setItem","stringify","$36e4052ebf5ea19e$var$createFavoritePageMarkup","removeItem","classList","remove","headline","main","parsedArray","index2","map","publishedDate","$parcel$interopDefault","published_date","format","readMoreId","imgUrl","altText","media","caption","$5R7wT","createPopularCardMarkup","LOCAL_STORAGE_POPULAR_READ_KEY","add","pub_date","multimedia","$jErh6","createSeachCardMarkup","LOCAL_STORAGE_INPUT_SEARCH_READ_KEY","textContent","style","display","$36e4052ebf5ea19e$var$searchBtn","$36e4052ebf5ea19e$var$input","$36e4052ebf5ea19e$var$searchInFavorite","searchOnPopularArr","searchOnSearchArr","abstract","includes","push","code"],"version":3,"file":"favorite.1618d8ad.js.map"}